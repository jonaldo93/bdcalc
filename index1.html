<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BD CALC 2</title>
    <script src="calculateHours1.js" defer></script>
    <link rel="stylesheet" type="text/css" href="style1.css">
</head>
<body>
    <div class="container">
    <h1>BD CALC </h1>
    <label for="hourlyWageSelection" class="label-hourly-wage">Gehaltsstufe:</label>
<select id="hourlyWageSelection" class="hourly-wage-select">
    <option value="Ä1">Ä1</option>
    <option value="Ä2">Ä2</option>
    <option value="Ä3">Ä3</option>
    <option value="Ä4">Ä4</option>
    <option value="Ä5">Ä5</option>
    <option value="Ä6">Ä6</option>
    <option value="FÄ1">FÄ1</option>
    <option value="FÄ2">FÄ2</option>
    <option value="FÄ3">FÄ3</option>
    <option value="FÄ4">FÄ4</option>
    <option value="FÄ5">FÄ5</option>
    <option value="FÄ6">FÄ6</option>
    <option value="OÄ1">OÄ1</option>
    <option value="OÄ2">OÄ2</option>
    <option value="OÄ3">OÄ3</option>
    <option value="CA">CA-Vertreter</option>
</select>
    <div id="totalBDsDisplayContainer">
    <strong>Total Dienste: </strong><span id="totalBDsDisplay">0</span>
    </div>
    <div id="errorDisplayContainer" style="display: none; color: red; margin-top: 10px;">
        <span id="errorDisplay"></span>
    </div>    
    <form id="hoursForm">
        <label for="MoDo">Montag-Donnerstag:</label>
        <select id="MoDo">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
        </select><br>       
        
        <label for="Fr">Freitag:</label>
        <select id="Fr">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
        </select><br>  
        
        <label for="Sa">Samstag:</label>
        <select id="Sa">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
        </select><br>  
        
        <label for="So">Sonntag:</label>
        <select id="So">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
        </select><br>  

        <label for="Feiertag">Feiertag:</label>
        <select id="Feiertag">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
        </select><br>  

        <!-- Additional on-call fields, initially hidden -->
        <div id="additionalOnCall1Container" style="display: none;">
            <label for="additionalOnCallSelect1">Fünfter Bereitschaftsdienst:</label>
            <select id="additionalOnCallSelect1">
                <option value="">Nicht erfolgt</option>
                <option value="MoDo">Montag-Donnerstag</option>
                <option value="Fr">Freitag</option>
                <option value="Sa">Samstag</option>
                <option value="So">Sonntag</option>
                <option value="Feiertag">Feiertag</option>
            </select><br>
        </div>
        
        <div id="additionalOnCall2Container" style="display: none;">
            <label for="additionalOnCallSelect2">Sechster Bereitschaftsdienst:</label>
            <select id="additionalOnCallSelect2">
                <option value="">Nicht erfolgt</option>
                <option value="MoDo">Montag-Donnerstag</option>
                <option value="Fr">Freitag</option>
                <option value="Sa">Samstag</option>
                <option value="So">Sonntag</option>
                <option value="Feiertag">Feiertag</option>
            </select><br>
        </div>
        
        <div id="additionalOnCall3Container" style="display: none;">
            <label for="additionalOnCallSelect3">Siebter Bereitschaftsdienst:</label>
            <select id="additionalOnCallSelect3">
                <option value="">Nicht erfolgt</option>
                <option value="MoDo">Montag-Donnerstag</option>
                <option value="Fr">Freitag</option>
                <option value="Sa">Samstag</option>
                <option value="So">Sonntag</option>
                <option value="Feiertag">Feiertag</option>
            </select><br>
        </div>
        
        <div id="additionalOnCall4Container" style="display: none;">
            <label for="additionalOnCallSelect4">Achter Bereitschaftsdienst:</label>
            <select id="additionalOnCallSelect4">
                <option value="">Nicht erfolgt</option>
                <option value="MoDo">Montag-Donnerstag</option>
                <option value="Fr">Freitag</option>
                <option value="Sa">Samstag</option>
                <option value="So">Sonntag</option>
                <option value="Feiertag">Feiertag</option>
            </select><br>
        </div>
        
        <div id="additionalOnCall5Container" style="display: none;">
            <label for="additionalOnCallSelect5">Neunter Bereitschaftsdienst:</label>
            <select id="additionalOnCallSelect5">
                <option value="">Nicht erfolgt</option>
                <option value="MoDo">Montag-Donnerstag</option>
                <option value="Fr">Freitag</option>
                <option value="Sa">Samstag</option>
                <option value="So">Sonntag</option>
                <option value="Feiertag">Feiertag</option>
            </select><br>
        </div>

        <!-- Short Notice Work Question -->
        <label for="shortNoticeYesNo">Kurzfristig eingesprungen?</label>
        <select id="shortNoticeYesNo">
            <option value="Nein">Nein</option>
            <option value="Ja">Ja</option>
        </select><br>

        <!-- Hidden section for number of Flex Dienste -->
        <label for="numFlexDienste" id="labelNumFlexDienste" style="display: none;">Anzahl der Flex Dienste:</label>
        <select id="numFlexDienste" style="display: none;">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
        </select><br>
        <!-- Container for dynamically added Flex Dienste details -->
        <div id="flexDiensteContainer" style="display: none;"></div>
        
        <!-- Advanced Section Start -->
        <div class="advanced-section">
            <h3>Advanced</h3>
            
            <!-- Existing dropdown for Überstunden -->
            <label for="overtimeCalculation">Zeitzuschlag f. Überstunden:<sup><a href="#footnote1" class="footnote" id="ref1">[1]</a></sup></label>
            <select id="overtimeCalculation" class="advanced-dropdown">
                <option value="nicht berechnen">nicht berechnen</option>
                <option value="berechnen">berechnen</option>
            </select><br>
            <input type="text" id="AnzahlUeberstunden" class="number-input" placeholder="Anzahl der Überstunden (z.B. 5.50)" pattern="^\d+(\.\d{1,2})?$" title="Bitte eine Zahl mit bis zu zwei Dezimalstellen eingeben" style="display: none;">         
            
            <!-- adjusted dropdown and input for Urlaubstage/Krankheitstage -->
            <label for="vacationSickDays">Urlaubstage/Krankheitstage:<sup><a href="#footnote2" class="footnote" id="ref2">[2]</a></sup></label>
            <select id="vacationSickDays" class="advanced-dropdown" onchange="toggleEntgeltfortzahlungInputs()">
                <option value="nicht berechnen">nicht berechnen</option>
                <option value="berechnen">berechnen</option>
            </select><br>
            <input type="number" id="AnzahlKU" class="number-input" placeholder="Anzahl der Urlaubstage/Krankheitstage" style="display: none;">
            
            <!-- New section for Entgeltfortzahlung -->
            <div id="entgeltfortzahlungInputs" style="display: none;">
                <h4>Entgeltfortzahlung für Urlaubstage/Krankheitstage</h4>
                <table>
                    <tr>
                        <th>Item</th>
                        <th>Vor 3 Monaten</th>
                        <th>Vor 2 Monaten</th>
                        <th>Vor 1 Monat</th>
                    </tr>
                    <tr>
                        <td>Summe Nachberechnung</td>
                        <td><input type="number" id="sumNachberechnung1" step="0.01"></td>
                        <td><input type="number" id="sumNachberechnung2" step="0.01"></td>
                        <td><input type="number" id="sumNachberechnung3" step="0.01"></td>
                    </tr>
                    <tr>
                        <td>Hiervon Zeitzuschlag f. Überstunden:</td>
                        <td><input type="number" id="zeitzuschlag1" step="0.01"></td>
                        <td><input type="number" id="zeitzuschlag2" step="0.01"></td>
                        <td><input type="number" id="zeitzuschlag3" step="0.01"></td>
                    </tr>
                    <tr>
                        <td>Hiervon Urlaubsaufschlag TVÄ:</td>
                        <td><input type="number" id="urlaubsaufschlag1" step="0.01"></td>
                        <td><input type="number" id="urlaubsaufschlag2" step="0.01"></td>
                        <td><input type="number" id="urlaubsaufschlag3" step="0.01"></td>
                    </tr>
                    <tr>
                        <td>Hiervon Krankenlohnaufschlag TVÄ:</td>
                        <td><input type="number" id="krankenlohnaufschlag1" step="0.01"></td>
                        <td><input type="number" id="krankenlohnaufschlag2" step="0.01"></td>
                        <td><input type="number" id="krankenlohnaufschlag3" step="0.01"></td>
                    </tr>
                    <tr>
                        <td>Hiervon Leistungsentgelte:</td>
                        <td><input type="number" id="leistungsentgelte1" step="0.01"></td>
                        <td><input type="number" id="leistungsentgelte2" step="0.01"></td>
                        <td><input type="number" id="leistungsentgelte3" step="0.01"></td>
                    </tr>
                    <tr>
                        <td>Hiervon Jahressonderzahlungen:</td>
                        <td><input type="number" id="jahressonder1" step="0.01"></td>
                        <td><input type="number" id="jahressonder2" step="0.01"></td>
                        <td><input type="number" id="jahressonder3" step="0.01"></td>
                    </tr>
                    <tr>
                        <td>Hiervon Sonderzahlungen nach Paragraph 23:<sup><a href="#footnote3" class="footnote" id="ref3">[3]</a></sup></td>
                        <td><input type="number" id="sonderzahlung23_1" step="0.01"></td>
                        <td><input type="number" id="sonderzahlung23_2" step="0.01"></td>
                        <td><input type="number" id="sonderzahlung23_3" step="0.01"></td>
                    </tr>
                </table>
            </div>
        </div> 
        <div class="buttons-container">
            <button type="submit" id="submitBtn">Berechnen</button>
            <button type="reset" id="resetButton">Zurücksetzen</button>
        </div>
    </form>

    <!-- Empty container for dynamically added results -->
    <div id="results"></div>
    
    <!--Footnotes-->
    
    <div class="info">
        Dieser Rechner geht davon aus, dass ihr die Pausen von 23:00 - 23:45 Uhr auf  16:00 - 16:45 Uhr umgepeppt habt. 
        Dies ist nur an Wochendenden / Feiertagen relevant. Hier kommt es dann zu einer Differenz von 0.75 Einheiten pro nicht-umgepeppte Nacht 
        in der Zeile "Nachtarbeit BD 25%". 
    </div>
    <div class="footnote" id="footnote1">
        <sup>[1]</sup> Die Überstunden (Code 40) kann man monatsbezogen im "Zeitausweis" im PEP einsehen: Cursor auf den Namen in der Zeile links legen, rechte Maustaste drücken und "Zeitausweis drucken..." auswählen. Dann "Vorschau"; und dann in der Box oben links ("Abrechnung").
    </div>
    <div class="footnote" id="footnote2">
        <sup>[2]</sup> Hierfür braucht ihr die Abrechnungen der drei Monate, welche dem Monat der Rückrechnung vorausgingen. Beispiel: Rückrechnung für April im Juni - dann braucht ihr die Abrechnungen von Januar, Februar und März.
    </div>
    <div id="footnote3" class="footnote">
        <sup>[3]</sup> Vermögenswirksame Leistungen, Jubiläumsprämien, Sterbegelt. Details hier: <a href="https://karriere.charite.de/fileadmin/user_upload/Entgelttabellen/Aerzteschaft/TV_%C3%84B_MarburgerBund_2023_unterschrieben.pdf#page=28">Entgelttabelle Ärzteschaft 2023 (Seite 28)</a>

    </div>    
    </div>    
</body>
</html>
